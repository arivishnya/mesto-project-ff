{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/./src/scripts/api.js","webpack://mesto/./src/scripts/validation.js","webpack://mesto/./src/scripts/modal.js","webpack://mesto/./src/scripts/card.js","webpack://mesto/./src/scripts/index.js"],"sourcesContent":["const token = \"a0036ef3-200a-495e-9686-79f48f6c8df6\";\nconst cohort = \"wff-cohort-10\";\n\nconst config = {\n  headers: {\n    authorization: token,\n  },\n  headersWithContentType: {\n    authorization: token,\n    \"Content-Type\": \"application/json\",\n  },\n  baseUrl: `https://mesto.nomoreparties.co/v1/${cohort}`,\n  editBaseUrl: `https://nomoreparties.co/v1/${cohort}`,\n};\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  }\n  return Promise.reject(`Ошибка: ${response.status}`);\n}\n\nfunction getUser() {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n  }).then(handleResponse);\n}\n\nfunction getCards() {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n  }).then(handleResponse);\n}\n\nfunction changeUserInfo(data) {\n  return fetch(`${config.editBaseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n}\n\nfunction addCard(data) {\n  return fetch(`${config.editBaseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n}\n\nfunction deleteCard(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(handleResponse);\n}\n\nfunction addCardLike(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/likes/${cardId}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then(handleResponse);\n}\n\nfunction deleteCardLike(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/likes/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(handleResponse);\n}\n\nfunction changeUserAvatar(data) {\n  return fetch(`${config.editBaseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n}\n\nexport {\n  getUser,\n  getCards,\n  changeUserInfo,\n  addCard,\n  deleteCard,\n  addCardLike,\n  deleteCardLike,\n  changeUserAvatar,\n};\n","function enableValidation({\n  formSelector,\n  inputSelector,\n  submitButtonSelector,\n  inputErrorClass,\n  errorClass,\n}) {\n  const formList = Array.from(document.querySelectorAll(formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, {\n      inputSelector,\n      submitButtonSelector,\n      inputErrorClass,\n      errorClass,\n    });\n  });\n}\n\nfunction clearValidation(\n  form,\n  { inputSelector, inputErrorClass, errorClass, buttonClass },\n  buttonDisabled = true\n) {\n  hideAllInputError(form, {\n    inputSelector,\n    inputErrorClass,\n    errorClass,\n  });\n\n  const buttonElement = form.querySelector(buttonClass);\n  buttonElement.disabled = buttonDisabled;\n}\n\nfunction setEventListeners(\n  formElement,\n  { inputSelector, submitButtonSelector, inputErrorClass, errorClass }\n) {\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\n  const buttonElement = formElement.querySelector(submitButtonSelector);\n  toggleButtonState(inputList, buttonElement);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, {\n        inputErrorClass,\n        errorClass,\n      });\n      toggleButtonState(inputList, buttonElement);\n    });\n  });\n}\n\nfunction hideAllInputError(\n  formElement,\n  { inputSelector, inputErrorClass, errorClass }\n) {\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, { inputErrorClass, errorClass });\n  });\n}\n\nfunction toggleButtonState(inputList, buttonElement) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.disabled = false;\n  }\n}\n\nfunction hasInvalidInput(inputList) {\n  return inputList.some((input) => !input.validity.valid);\n}\n\nfunction checkInputValidity(\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) {\n  if (!inputElement.validity.valid) {\n    if (inputElement.validity.patternMismatch) {\n      inputElement.setCustomValidity(inputElement.dataset.patternErrorMessage);\n    } else {\n      inputElement.setCustomValidity(\"\");\n    }\n\n    showInputError(formElement, inputElement, inputElement.validationMessage, {\n      inputErrorClass,\n      errorClass,\n    });\n  } else {\n    hideInputError(formElement, inputElement, { inputErrorClass, errorClass });\n  }\n}\n\nfunction showInputError(\n  formElement,\n  inputElement,\n  errorMessage,\n  { inputErrorClass, errorClass }\n) {\n  inputElement.classList.add(inputErrorClass);\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n}\n\nfunction hideInputError(\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) {\n  inputElement.classList.remove(inputErrorClass);\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  errorElement.textContent = \"\";\n  errorElement.classList.remove(errorClass);\n}\n\nexport { enableValidation, clearValidation };\n","function openPopup(elem) {\n  elem.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupWithEsc);\n}\n\nfunction closePopup(elem) {\n  elem.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupWithEsc);\n}\n\nfunction closePopupWithEsc(event) {\n  if (event.key === \"Escape\" || event.key === \"Esc\") {\n    const popupElement = document.querySelector(\".popup_is-opened\");\n    closePopup(popupElement);\n  }\n}\n\nfunction closePopupWithOverlay(event, elem) {\n  if (event.target === popup) {\n    closePopup(elem);\n  }\n}\n\nfunction setCloseModalByClickListeners(popupList) {\n  popupList.forEach((popup) => {\n    const closeButton = popup.querySelector(\".popup__close\");\n    closeButton.addEventListener(\"click\", (event) => {\n      event.stopPropagation();\n      closePopup(popup);\n    });\n    popup.addEventListener(\"click\", (event) => {\n      closePopupWithOverlay(event, popup);\n    });\n  });\n}\n\nexport { openPopup, closePopup, setCloseModalByClickListeners };\n","import { addCardLike, deleteCardLike } from \"./api\";\n\nconst cardTemplate = document.querySelector(\"#card-template\").content;\n\nfunction createCard(\n  userId,\n  { link, name, owner, _id, likes },\n  deletedCardFunction,\n  openPopupImageFunction,\n  toggleLikeCard\n) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const cardImage = cardElement.querySelector(\".card__image\");\n  cardImage.src = link;\n  cardImage.alt = name;\n  cardElement.querySelector(\".card__title\").textContent = name;\n\n  const cardDeleteElement = cardElement.querySelector(\".card__delete-button\");\n  if (userId !== owner._id) {\n    cardDeleteElement.style.display = \"none\";\n  } else {\n    cardDeleteElement.addEventListener(\"click\", () =>\n      deletedCardFunction(_id, cardElement)\n    );\n  }\n\n  cardElement.querySelector(\".card__like-text\").textContent = likes.length;\n\n  const cardLikeButtonElement = cardElement.querySelector(\".card__like-button\");\n  const isLiked = likes.some((user) => user._id == userId);\n  if (isLiked) {\n    cardLikeButtonElement.classList.add(\"card__like-button_is-active\");\n  }\n\n  cardLikeButtonElement.addEventListener(\"click\", (event) =>\n    toggleLikeCard(event, _id, cardElement)\n  );\n\n  cardImage.addEventListener(\"click\", openPopupImageFunction);\n\n  return cardElement;\n}\n\nfunction deleteCardElement(cardElement) {\n  cardElement.remove();\n}\n\nfunction toggleLikeCard(event, cardId, cardElement) {\n  const likeButton = event.target;\n  const isLiked = likeButton.classList.contains(\"card__like-button_is-active\");\n\n  const updateLikes = (card) => {\n    const likesCount = card.likes.length;\n    cardElement.querySelector(\".card__like-text\").textContent = likesCount;\n    likeButton.classList.toggle(\"card__like-button_is-active\", !isLiked);\n  };\n\n  if (isLiked) {\n    deleteCardLike(cardId)\n      .then((updatedCard) => updateLikes(updatedCard))\n      .catch((error) => console.error(error));\n  } else {\n    addCardLike(cardId)\n      .then((updatedCard) => updateLikes(updatedCard))\n      .catch((error) => console.error(error));\n  }\n}\n\nexport { createCard, deleteCardElement, toggleLikeCard };\n","import \"../pages/index.css\";\nimport {\n  getUser,\n  getCards,\n  changeUserInfo,\n  addCard,\n  changeUserAvatar,\n  deleteCard,\n} from \"./api\";\nimport { enableValidation, clearValidation } from \"./validation\";\nimport { openPopup, closePopup, setCloseModalByClickListeners } from \"./modal\";\nimport { createCard, deleteCardElement, toggleLikeCard } from \"./card\";\n\nlet userId;\nlet cardForDelete;\n\nconst page = document.querySelector(\".page\");\nconst cardsContainer = page.querySelector(\".places__list\");\n\nconst popups = {\n  edit: page.querySelector(\".popup_type_edit\"),\n  editAvatar: page.querySelector(\".popup_type_edit-avatar-profile\"),\n  newCard: page.querySelector(\".popup_type_new-card\"),\n  image: page.querySelector(\".popup_type_image\"),\n  deleteCard: page.querySelector(\".popup_type_delete-card\"),\n};\n\nconst popupButton = {\n  edit: popups.edit.querySelector(\".popup__button\"),\n  editAvatar: popups.editAvatar.querySelector(\".popup__button\"),\n  newCard: popups.newCard.querySelector(\".popup__button\"),\n};\n\nconst popupImage = {\n  image: popups.image.querySelector(\".popup__image\"),\n  caption: popups.image.querySelector(\".popup__caption\"),\n};\n\nconst profile = {\n  title: page.querySelector(\".profile__title\"),\n  description: page.querySelector(\".profile__description\"),\n  image: page.querySelector(\".profile__image\"),\n};\n\nconst profileButton = {\n  edit: page.querySelector(\".profile__edit-button\"),\n  editImage: page.querySelector(\".profile__image-button\"),\n  addCard: page.querySelector(\".profile__add-button\"),\n};\n\nconst formEditProfile = document.forms[\"edit-profile\"];\nconst { name: nameInput, description: jobInput } = formEditProfile;\n\nconst formEditAvatarProfile = document.forms[\"edit-avatar-profile\"];\nconst { \"edit-avatar-input\": avatarInput } = formEditAvatarProfile;\n\nconst formNewPlace = document.forms[\"new-place\"];\nconst { \"place-name\": placeNameInput, link: linkInput } = formNewPlace;\n\nconst formDeleteCard = document.forms[\"delete-card\"];\n\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__form-error_visible\",\n  buttonClass: \"popup__button\",\n};\n\nfunction handleError(error) {\n  console.error(error);\n}\n\nfunction updateProfile({ name, about, avatar }) {\n  if (name) profile.title.textContent = name;\n  if (about) profile.description.textContent = about;\n  if (avatar) profile.image.src = avatar;\n}\n\nfunction openPopupImage(event) {\n  const card = event.target.parentElement;\n  popupImage.image.src = event.target.src;\n  popupImage.image.alt = event.target.alt;\n  popupImage.caption.textContent =\n    card.querySelector(\".card__title\").textContent;\n  openPopup(popups.image);\n}\n\nfunction resetForm(form) {\n  form.reset();\n}\n\nfunction handleFormEditProfileSubmit(event) {\n  event.preventDefault();\n\n  const defaultSubmitButtonText = popupButton.edit.textContent;\n  changeTextFormButton(popupButton.edit);\n\n  changeUserInfo({\n    name: nameInput.value,\n    about: jobInput.value,\n  })\n    .then((user) => {\n      updateProfile(user);\n      closePopup(popups.edit);\n    })\n    .catch(handleError)\n    .finally(() => {\n      changeTextFormButton(popupButton, defaultSubmitButtonText);\n    });\n}\n\nfunction handleFormEditAvatarProfileSubmit(event) {\n  event.preventDefault();\n\n  const defaultSubmitButtonText = popupButton.editAvatar.textContent;\n  changeTextFormButton(popupButton.editAvatar);\n\n  changeUserAvatar({\n    avatar: avatarInput.value,\n  })\n    .then((user) => {\n      updateProfile(user);\n      closePopup(popups.editAvatar);\n    })\n    .catch(handleError)\n    .finally(() => {\n      changeTextFormButton(popupButton, defaultSubmitButtonText);\n    });\n}\n\nfunction handleFormNewPlaceSubmit(event) {\n  event.preventDefault();\n\n  const defaultSubmitButtonText = popupButton.newCard.textContent;\n  changeTextFormButton(popupButton.newCard);\n\n  addCard({\n    name: placeNameInput.value,\n    link: linkInput.value,\n  })\n    .then((newCard) => {\n      cardsContainer.prepend(\n        createCard(\n          userId,\n          newCard,\n          openCardDeleteConfirmationPopup,\n          openPopupImage,\n          toggleLikeCard\n        )\n      );\n      resetForm(formNewPlace);\n      clearValidation(formNewPlace, validationConfig);\n      closePopup(popups.newCard);\n    })\n    .catch(handleError)\n    .finally(() => {\n      changeTextFormButton(popupButton, defaultSubmitButtonText);\n    });\n}\n\nfunction handleFormDeleteCardSubmit(event) {\n  event.preventDefault();\n  deleteCard(cardForDelete.id)\n    .then(() => {\n      deleteCardElement(cardForDelete.element);\n      cardForDelete = {};\n      closePopup(popups.deleteCard).catch(handleError);\n    })\n}\n\nfunction openCardDeleteConfirmationPopup(id, element) {\n  cardForDelete = {\n    id,\n    element,\n  };\n  openPopup(popups.deleteCard);\n}\n\nfunction changeTextFormButton(popupButton, defaultText) {\n  popupButton.textContent = defaultText || \"Сохранение...\";\n}\n\nfunction handleProfileEditButtonClick(event) {\n  event.preventDefault();\n  nameInput.value = profile.title.textContent;\n  jobInput.value = profile.description.textContent;\n  clearValidation(formEditProfile, validationConfig, false);\n  openPopup(popups.edit);\n}\n\nfunction handleProfileImageButtonClick(event) {\n  event.preventDefault();\n  resetForm(formEditAvatarProfile);\n  clearValidation(formEditAvatarProfile, validationConfig);\n  openPopup(popups.editAvatar);\n}\n\nfunction handleProfileAddButtonClick(event) {\n  event.preventDefault();\n  openPopup(popups.newCard);\n}\n\nformEditProfile.addEventListener(\"submit\", handleFormEditProfileSubmit);\nformEditAvatarProfile.addEventListener(\n  \"submit\",\n  handleFormEditAvatarProfileSubmit\n);\nformNewPlace.addEventListener(\"submit\", handleFormNewPlaceSubmit);\nformDeleteCard.addEventListener(\"submit\", handleFormDeleteCardSubmit);\n\nprofileButton.edit.addEventListener(\"click\", handleProfileEditButtonClick);\nprofileButton.editImage.addEventListener(\n  \"click\",\n  handleProfileImageButtonClick\n);\nprofileButton.addCard.addEventListener(\"click\", handleProfileAddButtonClick);\n\nsetCloseModalByClickListeners(page.querySelectorAll(\".popup\"));\nenableValidation(validationConfig);\n\nPromise.all([getUser(), getCards()])\n  .then(([user, cards]) => {\n    userId = user._id;\n    updateProfile(user);\n    cards.forEach((card) => {\n      cardsContainer.append(\n        createCard(\n          userId,\n          card,\n          openCardDeleteConfirmationPopup,\n          openPopupImage,\n          toggleLikeCard\n        )\n      );\n    });\n  })\n  .catch(handleError);\n"],"names":["token","cohort","config","headers","authorization","headersWithContentType","baseUrl","concat","editBaseUrl","handleResponse","response","ok","json","Promise","reject","status","clearValidation","form","_ref2","inputSelector","inputErrorClass","errorClass","buttonClass","buttonDisabled","arguments","length","undefined","formElement","_ref4","Array","from","querySelectorAll","forEach","inputElement","hideInputError","hideAllInputError","querySelector","disabled","toggleButtonState","inputList","buttonElement","some","input","validity","valid","hasInvalidInput","_ref7","classList","remove","errorElement","id","textContent","openPopup","elem","add","document","addEventListener","closePopupWithEsc","closePopup","removeEventListener","event","key","closePopupWithOverlay","target","popup","userId","cardForDelete","cardTemplate","content","createCard","_ref","deletedCardFunction","openPopupImageFunction","toggleLikeCard","link","name","owner","_id","likes","cardElement","cloneNode","cardImage","src","alt","cardDeleteElement","style","display","cardLikeButtonElement","user","cardId","likeButton","isLiked","contains","updateLikes","card","likesCount","toggle","fetch","method","then","deleteCardLike","updatedCard","catch","error","console","addCardLike","formSelector","submitButtonSelector","page","cardsContainer","popups","edit","editAvatar","newCard","image","deleteCard","popupButton","popupImage","caption","profile","title","description","profileButton","editImage","addCard","formEditProfile","forms","nameInput","jobInput","formEditAvatarProfile","avatarInput","formNewPlace","placeNameInput","linkInput","formDeleteCard","validationConfig","handleError","updateProfile","about","avatar","openPopupImage","parentElement","resetForm","reset","openCardDeleteConfirmationPopup","element","changeTextFormButton","defaultText","preventDefault","data","defaultSubmitButtonText","value","body","JSON","stringify","finally","prepend","stopPropagation","_ref3","_ref5","patternMismatch","setCustomValidity","dataset","patternErrorMessage","errorMessage","_ref6","showInputError","validationMessage","checkInputValidity","setEventListeners","all","cards","append"],"sourceRoot":""}