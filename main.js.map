{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/./src/scripts/api.js","webpack://mesto/./src/scripts/validation.js","webpack://mesto/./src/scripts/modal.js","webpack://mesto/./src/scripts/card.js","webpack://mesto/./src/scripts/index.js"],"sourcesContent":["const token = \"a0036ef3-200a-495e-9686-79f48f6c8df6\";\nconst cohort = \"wff-cohort-10\";\n\nconst config = {\n  headers: {\n    authorization: token,\n  },\n  headersWithContentType: {\n    authorization: token,\n    \"Content-Type\": \"application/json\",\n  },\n  baseUrl: `https://mesto.nomoreparties.co/v1/${cohort}`,\n  editBaseUrl: `https://nomoreparties.co/v1/${cohort}`,\n};\nlet userId;\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  }\n  return Promise.reject(`Ошибка: ${response.status}`);\n}\n\nfunction handleError(error) {\n  console.error(error);\n}\n\nfunction getUser() {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n  })\n    .then(handleResponse)\n    .then((result) => {\n      userId = result._id;\n      return result;\n    })\n    .catch(handleError);\n}\n\nfunction getCards() {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction changeUserInfo(data) {\n  return fetch(`${config.editBaseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction addCard(data) {\n  return fetch(`${config.editBaseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction deleteCard(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction addCardLike(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/likes/${cardId}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction deleteCardLike(cardId) {\n  return fetch(`${config.editBaseUrl}/cards/likes/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nfunction changeUserAvatar(data) {\n  return fetch(`${config.editBaseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headersWithContentType,\n    body: JSON.stringify(data),\n  })\n    .then(handleResponse)\n    .then((result) => result)\n    .catch(handleError);\n}\n\nexport {\n  userId,\n  getUser,\n  getCards,\n  changeUserInfo,\n  addCard,\n  deleteCard,\n  addCardLike,\n  deleteCardLike,\n  changeUserAvatar,\n};\n","function enableValidation({\n  formSelector,\n  inputSelector,\n  submitButtonSelector,\n  inputErrorClass,\n  errorClass,\n}) {\n  const formList = Array.from(document.querySelectorAll(formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, {\n      inputSelector,\n      submitButtonSelector,\n      inputErrorClass,\n      errorClass,\n    });\n  });\n}\n\nfunction clearValidation(form, buttonDisabled = true) {\n  hideAllInputError(form, {\n    inputSelector: \".popup__input\",\n    inputErrorClass: \"popup__input_type_error\",\n    errorClass: \"popup__form-error_visible\",\n  });\n\n  const buttonElement = form.querySelector(\".popup__button\");\n  buttonElement.disabled = buttonDisabled;\n}\n\nfunction setEventListeners(\n  formElement,\n  { inputSelector, submitButtonSelector, inputErrorClass, errorClass }\n) {\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\n  const buttonElement = formElement.querySelector(submitButtonSelector);\n  toggleButtonState(inputList, buttonElement);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, {\n        inputErrorClass,\n        errorClass,\n      });\n      toggleButtonState(inputList, buttonElement);\n    });\n  });\n}\n\nfunction hideAllInputError(\n  formElement,\n  { inputSelector, inputErrorClass, errorClass }\n) {\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, { inputErrorClass, errorClass });\n  });\n}\n\nfunction toggleButtonState(inputList, buttonElement) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.disabled = false;\n  }\n}\n\nfunction hasInvalidInput(inputList) {\n  return inputList.some((input) => !input.validity.valid);\n}\n\nfunction checkInputValidity(\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) {\n  if (!inputElement.validity.valid) {\n    if (inputElement.validity.patternMismatch) {\n      inputElement.setCustomValidity(inputElement.dataset.patternErrorMessage);\n    } else {\n      inputElement.setCustomValidity(\"\");\n    }\n\n    showInputError(formElement, inputElement, inputElement.validationMessage, {\n      inputErrorClass,\n      errorClass,\n    });\n  } else {\n    hideInputError(formElement, inputElement, { inputErrorClass, errorClass });\n  }\n}\n\nfunction showInputError(\n  formElement,\n  inputElement,\n  errorMessage,\n  { inputErrorClass, errorClass }\n) {\n  inputElement.classList.add(inputErrorClass);\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n}\n\nfunction hideInputError(\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) {\n  inputElement.classList.remove(inputErrorClass);\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  errorElement.textContent = \"\";\n  errorElement.classList.remove(errorClass);\n}\n\nexport { enableValidation, clearValidation };\n","function openPopup(elem) {\n  elem.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupWithEsc);\n}\n\nfunction closePopup(elem) {\n  elem.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupWithEsc);\n}\n\nfunction closePopupWithEsc(event) {\n  const popupElement = document.querySelector(\".popup_is-opened\");\n\n  if (event.key === \"Escape\" || event.key === \"Esc\") {\n    closePopup(popupElement);\n  }\n}\n\nfunction closePopupWithOverlay(elem) {\n  closePopup(elem);\n}\n\nexport { openPopup, closePopup, closePopupWithOverlay };\n","import { userId, deleteCard, addCardLike, deleteCardLike } from \"./api\";\nimport { openPopup, closePopup } from \"./modal\";\n\nconst cardTemplate = document.querySelector(\"#card-template\").content;\n\nfunction createCard(\n  card,\n  deletedCardFunction,\n  openPopupImageFunction,\n  toggleLikeCard\n) {\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n\n  const { link, name, owner, _id, likes } = card;\n\n  const cardImage = cardElement.querySelector(\".card__image\");\n  cardImage.src = link;\n  cardImage.alt = name;\n  cardElement.querySelector(\".card__title\").textContent = name;\n\n  const cardDeleteElement = cardElement.querySelector(\".card__delete-button\");\n  if (userId != owner._id) {\n    cardDeleteElement.style.display = \"none\";\n  } else {\n    cardDeleteElement.addEventListener(\"click\", () =>\n      deletedCardFunction(card._id, cardElement)\n    );\n  }\n\n  cardElement.querySelector(\".card__like-text\").textContent = likes.length;\n\n  const cardLikeButtonElement = cardElement.querySelector(\".card__like-button\");\n  if (likes.some((user) => user._id == userId)) {\n    cardLikeButtonElement.classList.add(\"card__like-button_is-active\");\n  }\n\n  cardLikeButtonElement.addEventListener(\"click\", (event) =>\n    toggleLikeCard(event, _id, cardElement)\n  );\n\n  cardImage.addEventListener(\"click\", openPopupImageFunction);\n\n  return cardElement;\n}\n\nfunction deleteCardControl(cardId, cardElement) {\n  const popupTypeDeleteCard = document.querySelector(\".popup_type_delete-card\");\n  const formDeleteCard = document.forms[\"delete-card\"];\n  openPopup(popupTypeDeleteCard);\n  formDeleteCard.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    deleteCard(cardId).then(() => {\n      cardElement.remove();\n      closePopup(popupTypeDeleteCard);\n    });\n  });\n}\n\nfunction toggleLikeCard(event, cardId, cardElement) {\n  const likeButton = event.target;\n  const isLiked = likeButton.classList.contains(\"card__like-button_is-active\");\n\n  const callback = (card) => {\n    const likesCount = card.likes.length;\n    cardElement.querySelector(\".card__like-text\").textContent = likesCount;\n    likeButton.classList.toggle(\"card__like-button_is-active\", !isLiked);\n  };\n\n  if (isLiked) {\n    deleteCardLike(cardId).then((updatedCard) => callback(updatedCard));\n  } else {\n    addCardLike(cardId).then((updatedCard) => callback(updatedCard));\n  }\n}\n\nexport { createCard, deleteCardControl, toggleLikeCard };\n","import \"../../pages/index.css\";\nimport {\n  getUser,\n  getCards,\n  changeUserInfo,\n  addCard,\n  changeUserAvatar,\n} from \"./api\";\nimport { enableValidation, clearValidation } from \"./validation\";\nimport { openPopup, closePopup, closePopupWithOverlay } from \"./modal\";\nimport { createCard, deleteCardControl, toggleLikeCard } from \"./card\";\n\nconst page = document.querySelector(\".page\");\nconst placesList = page.querySelector(\".places__list\");\n\nconst popups = {\n  edit: page.querySelector(\".popup_type_edit\"),\n  editAvatar: page.querySelector(\".popup_type_edit-avatar-profile\"),\n  newCard: page.querySelector(\".popup_type_new-card\"),\n  image: page.querySelector(\".popup_type_image\"),\n};\n\nconst popupImage = {\n  image: popups.image.querySelector(\".popup__image\"),\n  caption: popups.image.querySelector(\".popup__caption\"),\n};\n\nconst profile = {\n  title: page.querySelector(\".profile__title\"),\n  description: page.querySelector(\".profile__description\"),\n  image: page.querySelector(\".profile__image\"),\n};\n\nconst formEditProfile = document.forms[\"edit-profile\"];\nconst { name: nameInput, description: jobInput } = formEditProfile;\n\nconst formEditAvatarProfile = document.forms[\"edit-avatar-profile\"];\nconst { \"edit-avatar-input\": avatarInput } = formEditAvatarProfile;\n\nconst formNewPlace = document.forms[\"new-place\"];\nconst { \"place-name\": placeNameInput, link: linkInput } = formNewPlace;\n\nfunction updateProfile({ name, about, avatar }) {\n  if (name) profile.title.textContent = name;\n  if (about) profile.description.textContent = about;\n  if (avatar) profile.image.src = avatar;\n}\n\npage.addEventListener(\"click\", function (event) {\n  const popupElement = page.querySelector(\".popup_is-opened\");\n\n  if (event.target.classList.contains(\"popup\")) {\n    closePopupWithOverlay(popupElement);\n  } else if (event.target.classList.contains(\"popup__close\")) {\n    closePopup(popupElement);\n  } else if (event.target.classList.contains(\"profile__edit-button\")) {\n    nameInput.value = profile.title.textContent;\n    jobInput.value = profile.description.textContent;\n    clearValidation(formEditProfile, false);\n    openPopup(popups.edit);\n  } else if (\n    event.target.classList.contains(\"profile__image-button\") ||\n    event.target.parentElement.classList.contains(\"profile__image-button\")\n  ) {\n    resetForm(formEditAvatarProfile);\n    clearValidation(formEditAvatarProfile);\n    openPopup(popups.editAvatar);\n  } else if (event.target.classList.contains(\"profile__add-button\")) {\n    resetForm(formNewPlace);\n    clearValidation(formNewPlace);\n    openPopup(popups.newCard);\n  }\n});\n\nfunction openPopupImage(event) {\n  const card = event.target.parentElement;\n  popupImage.image.src = event.target.src;\n  popupImage.image.alt = captionText;\n  popupImage.caption.textContent =\n    card.querySelector(\".card__title\").textContent;\n  openPopup(popups.image);\n}\n\nformEditProfile.addEventListener(\"submit\", handleFormEditProfileSubmit);\nformEditAvatarProfile.addEventListener(\n  \"submit\",\n  handleFormEditAvatarProfileSubmit\n);\nformNewPlace.addEventListener(\"submit\", handleFormNewPlaceSubmit);\n\nfunction resetForm(form) {\n  form.reset();\n}\n\nfunction handleFormEditProfileSubmit(event) {\n  event.preventDefault();\n\n  const popupButton = popups.edit.querySelector(\".popup__button\");\n  const text = popupButton.textContent;\n  changeTextFormButton(popupButton);\n\n  changeUserInfo({\n    name: nameInput.value,\n    about: jobInput.value,\n  }).then((user) => {\n    updateProfile(user);\n    changeTextFormButton(popupButton, text);\n    closePopup(popups.edit);\n  });\n}\n\nfunction handleFormEditAvatarProfileSubmit(event) {\n  event.preventDefault();\n\n  const popupButton = popups.editAvatar.querySelector(\".popup__button\");\n  const text = popupButton.textContent;\n  changeTextFormButton(popupButton);\n\n  changeUserAvatar({\n    avatar: avatarInput.value,\n  }).then((user) => {\n    updateProfile(user);\n    changeTextFormButton(popupButton, text);\n    closePopup(popups.editAvatar);\n  });\n}\n\nfunction handleFormNewPlaceSubmit(event) {\n  event.preventDefault();\n\n  const popupButton = popups.newCard.querySelector(\".popup__button\");\n  const text = popupButton.textContent;\n  changeTextFormButton(popupButton);\n\n  addCard({\n    name: placeNameInput.value,\n    link: linkInput.value,\n  }).then((newCard) => {\n    placesList.prepend(createCard(newCard, deleteCardControl));\n    changeTextFormButton(popupButton, text);\n    closePopup(popups.newCard);\n  });\n}\n\nfunction changeTextFormButton(popupButton, defaultText) {\n  popupButton.textContent = defaultText || \"Сохранение...\";\n}\n\nenableValidation({\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__form-error_visible\",\n});\n\nPromise.all([getUser(), getCards()]).then(([user, cards]) => {\n  updateProfile(user);\n  cards.forEach((card) => {\n    placesList.append(\n      createCard(card, deleteCardControl, openPopupImage, toggleLikeCard)\n    );\n  });\n});\n"],"names":["userId","token","cohort","config","headers","authorization","headersWithContentType","baseUrl","concat","editBaseUrl","handleResponse","response","ok","json","Promise","reject","status","handleError","error","console","clearValidation","form","formElement","_ref3","inputSelector","inputErrorClass","errorClass","buttonDisabled","arguments","length","undefined","Array","from","querySelectorAll","forEach","inputElement","hideInputError","querySelector","disabled","toggleButtonState","inputList","buttonElement","some","input","validity","valid","hasInvalidInput","_ref6","classList","remove","errorElement","id","textContent","openPopup","elem","add","document","addEventListener","closePopupWithEsc","closePopup","removeEventListener","event","popupElement","key","cardTemplate","content","createCard","card","deletedCardFunction","openPopupImageFunction","toggleLikeCard","cardElement","cloneNode","link","name","owner","_id","likes","cardImage","src","alt","cardDeleteElement","style","display","cardLikeButtonElement","user","deleteCardControl","cardId","popupTypeDeleteCard","formDeleteCard","forms","preventDefault","fetch","method","then","result","catch","deleteCard","likeButton","target","isLiked","contains","callback","likesCount","toggle","deleteCardLike","updatedCard","addCardLike","_ref","formSelector","submitButtonSelector","page","placesList","popups","edit","editAvatar","newCard","image","popupImage","caption","profile","title","description","formEditProfile","nameInput","jobInput","formEditAvatarProfile","avatarInput","formNewPlace","placeNameInput","linkInput","updateProfile","about","avatar","openPopupImage","parentElement","captionText","resetForm","reset","changeTextFormButton","popupButton","defaultText","value","data","text","body","JSON","stringify","prepend","_ref2","_ref4","patternMismatch","setCustomValidity","dataset","patternErrorMessage","errorMessage","_ref5","showInputError","validationMessage","checkInputValidity","setEventListeners","all","cards","append"],"sourceRoot":""}